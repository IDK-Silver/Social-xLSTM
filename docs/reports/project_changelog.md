# Social-xLSTM 專案變更記錄

本文檔記錄專案開發過程中的重要決策、變更和里程碑。

## 專案基本資訊

### 學術資訊
- **專案編號**：NUTN-CSIE-PRJ-115-006
- **專案名稱**：基於 Social 與 xLSTM 預測交通車流量之研究
- **英文名稱**：A Study on Traffic Flow Prediction Based on Social Pooling and xLSTM
- **學校**：國立臺南大學資訊工程學系
- **指導教授**：陳宗禧 教授
- **研究團隊**：
  - 黃毓峰 (S11159005)
  - 唐翊靜 (S11159028)

### 技術核心
- **主要創新**：Social Pooling + xLSTM 無拓撲依賴的交通預測
- **研究問題**：解決現有時空圖模型對完整道路拓撲的依賴限制
- **數據來源**：台灣公路總局即時交通流量資料
- **數據規模**：66,371 筆資料，約 1.5 個月

## 📅 專案時間線

### 2025-01-08

#### 🗺️ 座標處理系統分析
- **重要發現**：專案已有完整的座標處理系統
- **現有組件**：
  - `convert_coords.py` - 基本墨卡托投影轉換
  - `spatial_coords.py` - 完整的 CoordinateSystem 類別
  - 支援雙向轉換、距離計算、方位角計算
- **座標系統**：以台灣南投為原點的墨卡托投影
- **滿足需求**：完全支援 Social Pooling 的座標需求
- **結論**：無需重新設計，可直接使用現有系統

### 2025-01-08
#### 🔍 專案健康狀況分析
- **發現問題**：
  - 嚴重的程式碼重複（5 個不同的 LSTM 實現）
  - 專案結構混亂（sanbox/ 實驗代碼混在正式專案中）
  - 命名不一致和大量空文件
- **量化指標**：
  - 重複代碼：約 1,200+ 行
  - 空文件：55+ 個（已清理）
  - 測試覆蓋率：< 30%

#### 📄 期中報告分析與文檔重構
- **重要發現**：透過 MCP markdownify 工具成功讀取期中報告 PDF
- **專案重新定位**：
  - 從簡單的交通預測系統 → 學術研究專案
  - 核心創新：Social Pooling 機制解決拓撲依賴問題
  - 技術架構：座標驅動社交池化 + Hybrid xLSTM

#### 🗂️ 文檔結構重組
- **創建分類結構**：
  ```
  docs/
  ├── overview/        # 專案概覽
  ├── technical/       # 技術文檔
  ├── implementation/  # 實現文檔
  └── reports/         # 報告文檔
  ```
- **重要文檔創建**：
  - `technical/mathematical_formulation.tex` - 完整數學公式定義
  - `reports/project_status.md` - 專案狀態報告（整合健康狀況、進度、風險評估）
  - `docs/README.md` - 文檔導覽系統

## 🔬 技術決策記錄

### 數學公式文檔格式選擇
- **決策**：使用 LaTeX (.tex) 而非 Markdown
- **理由**：
  - 專業數學排版需求
  - 學術慣例（便於後續論文投稿）
  - 複雜公式支援（矩陣、多行對齊等）
  - 完整的符號和引用系統

### 專案結構清理策略
- **立即行動**：
  1. 移除或整合 `sanbox/` 重複代碼
  2. 清理所有空文件
  3. 統一 LSTM 實現，保留標準版本
- **短期改善**：
  1. 重組專案結構
  2. 完成 Social-xLSTM 核心實現
  3. 提升測試覆蓋率至 70%+

### 文檔組織原則
- **分類邏輯**：按功能而非時間順序分類
- **命名規範**：使用直觀的英文名稱，避免數字前綴
- **維護策略**：每個分類有明確的更新責任和時機

## 📊 當前專案狀況

### ✅ 已完成
- **數據處理管線**：完整的 XML → JSON → HDF5 轉換流程
- **基礎架構**：PyTorch Lightning 數據載入器和評估框架
- **文檔系統**：完整的分類文檔結構和數學公式定義
- **實際數據**：66,371 筆台灣公路總局交通數據

### 🚧 開發中
- **Social-xLSTM 核心實現**：
  - 座標驅動社交池化層
  - Hybrid xLSTM (sLSTM + mLSTM)
  - 指數門控機制
- **模型訓練與驗證流程**

### 📋 待開發
- **研究驗證**：多種交通數據集實證研究
- **效能比較**：與現有時空模型的對比分析
- **應用設計**：即時預測系統和視覺化介面

## 🎯 核心研究問題

1. **拓撲依賴問題**：如何在缺乏完整拓撲資訊下學習節點間空間互動？
2. **自動結構學習**：Social xLSTM 能否自動建構節點依賴結構？
3. **不規則節點適應性**：模型在節點分布不規則時能否保持性能？
4. **動態互動捕捉**：社交池化如何有效捕捉即時流量互動？
5. **通用性驗證**：模型能否適用於其他時空動態預測問題？

## 🔄 重要變更記錄

### 文檔架構變更
- **2025-01-08**：移除數字前綴，使用直觀分類名稱
  - `01-overview/` → `overview/`
  - `02-technical/` → `technical/`
  - `03-implementation/` → `implementation/`
  - `04-reports/` → `reports/`

### 專案定位調整
- **2025-01-08**：從產品開發調整為學術研究專案
  - 重點從實用性轉向創新性和理論貢獻
  - 增加學術資訊和研究問題描述
  - 強調 Social Pooling 的核心創新價值

## 📝 待辦事項

### 緊急（本週）
- [ ] 清理 `sanbox/` 重複代碼
- [ ] 實現 Social Pooling 核心演算法
- [ ] 完成 `traffic_xlstm.py` 模型實現

### 重要（本月）
- [ ] 完整的 Social-xLSTM 訓練流程
- [ ] 與 LSTM 基準模型的性能比較
- [ ] 提升測試覆蓋率

### 長期（學期末）
- [ ] 多數據集驗證實驗
- [ ] 期末報告撰寫
- [ ] 論文投稿準備

## 💡 重要提醒

- **MCP 工具可用**：markdownify MCP server 可處理 PDF 轉 markdown
- **數學公式**：所有公式定義在 `technical/mathematical_formulation.tex`
- **專案清理**：程式碼重複問題需優先解決
- **學術導向**：所有開發都應以研究目標為導向